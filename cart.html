<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart</title>
    <link rel="shortcut icon" href="/src/favion.png" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      #home:hover {
        cursor: pointer;
        text-decoration: underline;
      }
      .cart-container {
        /* width: 100vw; */
        /* margin: 80px 0; */
        display: flex;
        flex-direction: row;
        justify-content: center;
        flex-wrap: wrap;

        align-items: start;
      }
      table {
        margin: 20px 5px;
        border-collapse: collapse;
      }

      .table1 {
        width: 60%;
        min-width: 400px;
      }
      .table2 {
        width: 30%;
        min-width: 400px;
      }
      th {
        background-color: #336622;
        color: white;
        text-align: left;
        padding: 5px;
      }
      td {
        padding: 5px;
        border-bottom: 1px solid #336622;
      }
      .item {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        width: 200px;
        line-height: 0;
      }
      .item-image {
        min-width: 72px;
        width: 20%;
        min-height: 96px;

        /* padding: 5px 15px; */
      }
      .item-info {
        display: flex;
        flex-direction: column;
        justify-content: center;
        /* padding: 5px 15px; */
      }
      .change-qty {
        background-color: #336622;
        color: white;
        padding: 7px 12px;
        /* border-radius: 5px; */
        border: 2px solid white;
      }
    </style>
    <script src="/js/validation.js"></script>
  </head>
  <body>
    <main>
      <p>
        <span id="home" style="color: grey" onclick="goToPage('index.html')"
          >Home
        </span>
        / Cart
      </p>
      <h1 style="text-align: center; font-weight: 400">Shopping Cart</h1>

      <div class="cart-container">
        <table class="table1">
          <tr>
            <th>Item</th>
            <th>Quantity</th>
            <th>Total</th>
          </tr>
          <tr class="items">
            <td>
              <div class="item">
                <img class="item-image" src="/src/bedroom-plant.jpg" alt="" />
                <div class="item-info">
                  <p>Indoor plant</p>
                  <p>Price: $<span id="item_price">10</span>.00</p>
                  <p onclick="deleteItem()" style="color: red; margin: 5px 0">
                    <span style="font-size: 14px">Delete </span>
                    <i id="delete_item" class="fa-solid fa-trash"></i>
                  </p>
                </div>
              </div>
            </td>
            <td>
              <span
                class="change-qty"
                id="increase_qty"
                style="border-radius: 10px 0 0 10px"
                >+</span
              ><span class="change-qty" id="item_qty" style="padding: 10px 15px"
                >1</span
              ><span
                class="change-qty"
                id="decrease_qty"
                style="border-radius: 0 10px 10px 0"
                >-</span
              >
            </td>
            <td>$ <span id="total">00.00</span></td>
          </tr>
          <tr class="items">
            <td>
              <div class="item">
                <img class="item-image" src="/src/bedroom-plant.jpg" alt="" />
                <div class="item-info">
                  <p>Indoor plant</p>
                  <p>Price: $<span id="item_price">10</span>.00</p>
                  <p
                    onclick="deleteItem(this)"
                    style="color: red; margin: 5px 0"
                  >
                    <span style="font-size: 14px">Delete </span>
                    <i id="delete_item" class="fa-solid fa-trash"></i>
                  </p>
                </div>
              </div>
            </td>
            <td>
              <span
                class="change-qty"
                id="increase_qty"
                style="border-radius: 10px 0 0 10px"
                onclick="increaseQty()"
                >+</span
              ><span class="change-qty" id="item_qty" style="padding: 10px 15px"
                >1</span
              ><span
                class="change-qty"
                id="decrease_qty"
                style="border-radius: 0 10px 10px 0"
                onclick="decreaseQty()"
                >-</span
              >
            </td>
            <td>$ <span id="total">00.00</span></td>
          </tr>
        </table>
        <table class="table2">
          <tr>
            <th>Order Details</th>
          </tr>
          <tr>
            <td>
              <div class="item" style="display: block">
                <h2>Cart totals</h2>
                <p>Subtotal: $<span id="sub_total">00.00</span></p>
                <p>Shipping: <span id="shipping">00.00</span></p>
                <p>Total: $<span id="cart_total">00.00</span></p>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </main>
    <script>
      let item = document.getElementById("item_qty").innerHTML;
      const increaseQty = () => {
        item++;
        document.getElementById("item_qty").innerHTML = item;
        calculateTotal();
      };
      const decreaseQty = () => {
        if (item > 1) {
          item--;
          document.getElementById("item_qty").innerHTML = item;
          calculateTotal();
        }
      };

      const calculateTotal = () => {
        let price = document.getElementById("item_price").innerHTML;
        let total = item * price;
        let shipping = document.getElementById("shipping");
        let shippingCost = 0;
        document.getElementById("total").innerHTML = total.toFixed(2);
        document.getElementById("sub_total").innerHTML = total.toFixed(2);
        if (total > 100) {
          shipping.innerHTML = "Free";
        } else {
          shippingCost = (10 / 100) * total;
          shipping.innerHTML = shippingCost.toFixed(2);
        }
        document.getElementById("cart_total").innerHTML = (
          total + shippingCost
        ).toFixed(2);
      };
      calculateTotal();

      const deleteItem = () => {
        let cart_item = document.querySelector(".items");
        cart_item.remove();
        alert("Item removed from cart");
      };
    </script>
  </body>
</html>
